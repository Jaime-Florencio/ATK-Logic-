# üìò Buffer vs Stream

Este documento detalha os dois principais modos de opera√ß√£o do analisador l√≥gico ATK-Logic: **Buffer Mode** e **Stream Mode**.  
Al√©m disso, inclui os m√©todos de coleta (**Normal, Auto, Instant**) e a t√©cnica de compress√£o **RLE (Run-Length Encoding)**, conforme descrito no manual oficial (se√ß√µes 5.1, 5.2 e 5.3).

---

## üîπ Buffer Mode

O **Buffer Mode** utiliza a mem√≥ria interna do analisador (chamada de *buffer*) para armazenar as amostras capturadas.  
- Essa mem√≥ria √© **fixa e limitada** (ex.: DL16 ‚âà 128 MiB).  
- O dispositivo coleta dados at√© encher o buffer, formando um **bloco fixo de captura**.  
- Ap√≥s isso, os dados s√£o enviados para o PC para an√°lise.

### Caracter√≠sticas
- Alta taxa de amostragem: at√© **250 MHz (1 canal)**.  
- Tempo de captura limitado pelo tamanho do buffer.  
- Permite compress√£o RLE (Run-Length Encoding) para aumentar o *depth efetivo*.  
- Adequado para capturas curtas que exigem **alta precis√£o temporal**.

### Analogia
Pense no Buffer Mode como **tirar uma fotografia** em alta resolu√ß√£o: voc√™ congela um instante detalhado, mas a dura√ß√£o √© curta.

---

## üîπ Stream Mode

O **Stream Mode** envia as amostras diretamente via USB para a RAM do computador.  
- O PC atua como um **buffer circular** de recep√ß√£o.  
- Permite capturas de **longa dura√ß√£o** (praticamente ilimitadas).  
- A taxa de amostragem √© limitada pela **largura de banda da USB 2.0** (~280‚Äì320 Mbit/s √∫teis).

### Caracter√≠sticas
- Taxa m√°xima de amostragem: **20 MHz (16 canais)**.  
- Dura√ß√£o de captura limitada apenas pela RAM/disco do PC.  
- Ideal para monitoramento cont√≠nuo ou protocolos longos.  
- N√£o suporta compress√£o RLE.  

### Analogia
Pense no Stream Mode como uma **live no YouTube**: √© cont√≠nua, mas com qualidade limitada pela velocidade da internet (USB).

---

## üìä Compara√ß√£o Resumida

| Aspecto              | Buffer Mode                          | Stream Mode                        |
|----------------------|--------------------------------------|------------------------------------|
| **Mem√≥ria usada**    | Mem√≥ria interna (ex.: 128 MiB)       | RAM do PC via USB                  |
| **Taxa m√°xima**      | At√© 250 MHz (1 canal)                | At√© 20 MHz (16 canais)             |
| **Dura√ß√£o**          | Limitada pelo tamanho do buffer      | Limitada pela RAM/disco do PC      |
| **Compress√£o**       | RLE dispon√≠vel                      | N√£o dispon√≠vel                     |
| **Uso t√≠pico**       | Capturas curtas e precisas           | Monitoramento longo e cont√≠nuo     |

---

## ‚ö° Exemplo Pr√°tico ‚Äì Tempo de Captura no Buffer

F√≥rmula:

```
tempo (s) = buffer (bits) √∑ [taxa de amostragem (Hz) √ó n¬∫ de canais]
```


Exemplo:  
- DL16 (buffer ‚âà 128 MiB = 134.217.728 Bytes = 1.073.741.824 bits)  
- Frequ√™ncia = 250 MHz  
- Canais = 1  


```
tempo = 1.073.741.824 √∑ (250.000.000 √ó 1)
tempo ‚âà 4,29 segundos
```

Se usar **16 canais ativos**:

```
tempo = 1.073.741.824 √∑ (250.000.000 √ó 16)
tempo ‚âà 0,27 segundos
```

---

## üì° Nota: Largura de Banda USB 2.0

A **largura de banda** √© a quantidade m√°xima de dados que podem ser transmitidos por segundo em um canal de comunica√ß√£o.  
- USB 2.0: **480 Mbit/s te√≥ricos**  
- √öteis no DL16: ~280‚Äì320 Mbit/s  

Exemplo no Stream Mode:  
- 20 MHz √ó 16 canais = 320 Mbit/s  
- Isso ocupa praticamente toda a banda dispon√≠vel ‚Üí por isso o limite de 20 MHz.  

---

## üåÄ Collection Methods (Se√ß√£o 5.2 do Manual)

O ATK-Logic oferece tr√™s m√©todos de coleta de dados:

1. **Normal**  
   - Fluxo completo: prepara√ß√£o ‚Üí trigger ‚Üí captura ‚Üí exibi√ß√£o.  
   - Ideal para capturas controladas.  

2. **Auto**  
   - Repeti√ß√£o autom√°tica do ‚ÄúNormal‚Äù em intervalos definidos.  
   - √ötil para capturar eventos que se repetem.  

3. **Instant**  
   - Captura imediata, **sem esperar trigger**.  
   - √ötil para registrar rapidamente qualquer atividade.  

---

## üóúÔ∏è Data Compression (RLE) ‚Äì Se√ß√£o 5.3 do Manual

O **Run-Length Encoding (RLE)** √© uma t√©cnica de compress√£o sem perdas dispon√≠vel apenas no **Buffer Mode**.  

### Como funciona
- Em vez de armazenar cada amostra repetida, o sistema guarda:  
```
valor = n√≠vel l√≥gico (0 ou 1)
dura√ß√£o = n√∫mero de ciclos mantidos
```

- Isso reduz drasticamente o uso de mem√≥ria quando o sinal permanece est√°vel.  

### Vantagens
- Aumenta o *depth efetivo* em sinais repetitivos.  
- Pode multiplicar o tempo de captura v√°rias vezes.  

### Limita√ß√µes
- Se o sinal mudar r√°pido (muitos pulsos), a compress√£o perde efici√™ncia.  
- N√£o est√° dispon√≠vel no Stream Mode.  
- Nos menus do software, taxas de amostragem com **asterisco (*)** indicam uso de RLE.  

---

## üì∑ Exemplo de Amostra e Canais

Uma **amostra** captura o estado l√≥gico de **todos os canais ativos** em um instante.  
- 1 canal ativo ‚Üí 1 bit (0 ou 1)  
- 16 canais ativos ‚Üí 16 bits (cada um 0 ou 1)  

Exemplo com 4 canais:  
```
Canal1 = 1
Canal2 = 0
Canal3 = 1
Canal4 = 0
```

Armazenado como:  
```
1010
```

---

## üìñ Refer√™ncia
- **ATK-Logic User Manual**, Se√ß√µes 5.1 (Buffer vs Stream), 5.2 (Collection Method), 5.3 (Data Compression).
